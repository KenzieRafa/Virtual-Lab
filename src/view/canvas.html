<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Virtual Lab - Berpikir Komputasional TPB ITB</title>
    <link rel="stylesheet" href="../style/canvas.css">
    <link rel="stylesheet" href="../style/auth.css">
    <link rel="stylesheet" href="../style/responsive.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <header>
    <div class="header-content">
        <button class="hamburger-btn" id="hamburgerBtn" onclick="toggleMobileMenu()">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <div class="logo">
            <a href="/">
                <img src="../asset/logo.png" alt="StringBox Logo" class="logo-img">
            </a>
        </div>
        
        <nav id="mainNav" class="main-nav">
            <ul>
                <li><button onclick="window.location.href='/'" class="nav-btn" data-page="home">Beranda</button></li>
                <li><button onclick="window.location.href='material.html'" class="nav-btn" data-page="material">Materi</button></li>
                <li><button onclick="window.location.href='practice.html'" class="nav-btn" data-page="practice">Latihan</button></li>
                <li><button onclick="window.location.href='dragdrop.html'" class="nav-btn" data-page="drag-drop">Drag&Drop</button></li>
                <li><button onclick="window.location.href='canvas.html'" class="nav-btn active" data-page="canvas-viz">Visualisasi</button></li>
                <li><button onclick="window.location.href='leaderboard.html'" class="nav-btn" data-page="leaderboard">Leaderboard</button></li>
                <li><button onclick="window.location.href='profile.html'" class="nav-btn" data-page="profile">Academic Progress</button></li>
            </ul>
        </nav>
        
        <div class="auth-section" id="authSection">
            <button onclick="showAuthModal('signin')" class="auth-button" id="signInBtn">Sign In</button>
            <div class="user-profile-header" id="userProfileHeader" style="display: none;">
                <span class="user-name" id="userNameHeader"></span>
                <button onclick="signOut()" class="sign-out-btn">Sign Out</button>
            </div>
        </div>
    </div>
</header>
<div id="authModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeAuthModal()">&times;</span>
        
        <div id="signInForm" class="auth-form">
            <h2>Sign In</h2>
            
            <button onclick="signInWithGoogle()" class="google-auth-btn">
                <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                    <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                    <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                    <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                    <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                </svg>
                Continue with Google
            </button>
            
            <div class="auth-divider">
                <span>atau</span>
            </div>
            
            <input type="email" id="signInEmail" placeholder="Email" required>
            <input type="password" id="signInPassword" placeholder="Password" required>
            <button onclick="signIn()" class="auth-submit-btn">Sign In</button>
            <p class="auth-switch">Belum punya akun? <a onclick="switchAuthForm('signup')">Sign Up</a></p>
        </div>
        
        <div id="signUpForm" class="auth-form" style="display: none;">
            <h2>Sign Up</h2>
            
            <button onclick="signInWithGoogle()" class="google-auth-btn">
                <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                    <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/>
                    <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/>
                    <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/>
                    <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/>
                </svg>
                Continue with Google
            </button>
            
            <div class="auth-divider">
                <span>atau</span>
            </div>
            
            <input type="text" id="signUpName" placeholder="Nama Lengkap" required>
            <input type="email" id="signUpEmail" placeholder="Email" required>
            <input type="password" id="signUpPassword" placeholder="Password (min 6 karakter)" required>
            <button onclick="signUp()" class="auth-submit-btn">Sign Up</button>
            <p class="auth-switch">Sudah punya akun? <a onclick="switchAuthForm('signin')">Sign In</a></p>
        </div>
        
        <div id="authMessage" class="auth-message"></div>
    </div>
</div>
    <div id="welcomeModal" class="modal" style="display: none;">
        <div class="modal-content welcome-content">
            <h2>Selamat Datang di Stringbox! ðŸŽ‰</h2>
            <p>Untuk menyimpan progress pembelajaran Anda, silakan Sign In atau Sign Up terlebih dahulu.</p>
            <div class="welcome-buttons">
                <button onclick="showAuthModal('signin')" class="welcome-btn">Sign In</button>
                <button onclick="showAuthModal('signup')" class="welcome-btn">Sign Up</button>
                <button onclick="closeWelcomeModal()" class="welcome-btn-skip">Lanjutkan Tanpa Akun</button>
            </div>
        </div>
    </div>

    <main>
        <section id="canvas-viz" class="page active">
            <h1 class="page-title">Visualisasi Algoritma Sorting</h1>
            
            <div class="canvas-intro">
                <p>Lihat bagaimana algoritma sorting bekerja secara visual! Pilih algoritma dan tekan "Mulai Sorting" untuk melihat animasinya.</p>
            </div>

            <div class="canvas-controls">
                <button onclick="generateRandomArray()" class="canvas-btn">Generate Array Baru</button>
                <select id="sortAlgorithm" class="canvas-select">
                    <option value="bubble">Bubble Sort</option>
                    <option value="selection">Selection Sort</option>
                    <option value="insertion">Insertion Sort</option>
                </select>
                <button onclick="startSorting()" class="canvas-btn primary">Mulai Sorting</button>
                <button onclick="resetCanvas()" class="canvas-btn">Reset</button>
            </div>

            <div class="canvas-container">
                <canvas id="sortCanvas" width="800" height="400"></canvas>
            </div>

            <div class="canvas-info">
                <div class="info-item">
                    <span class="info-label">Status:</span>
                    <span id="sortStatus">Siap</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Perbandingan:</span>
                    <span id="comparisons">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Swap:</span>
                    <span id="swaps">0</span>
                </div>
            </div>

            <div class="algorithm-explanation">
                <h3>Penjelasan Algoritma:</h3>
                <div id="algoExplanation">
                    <p><strong>1. Bubble Sort</strong></p>
                    <p>Bubble Sort bekerja dengan membandingkan elemen yang bersebelahan dalam sebuah daftar. Jika urutannya salah (misalnya elemen kiri lebih besar dari elemen kanan untuk urutan naik), maka kedua elemen ditukar. Proses ini dilakukan berulang-ulang hingga tidak ada lagi pertukaran, yang berarti data sudah terurut.</p>
                    <p><em>Inti: Tukar elemen bersebelahan sampai urut.</em></p>
                    <br>
                    <p><strong>2. Selection Sort</strong></p>
                    <p>Selection Sort bekerja dengan cara mencari elemen terkecil (atau terbesar) dari seluruh elemen yang belum terurut, kemudian menempatkannya di posisi yang sesuai (biasanya di depan). Setelah itu, proses dilanjutkan untuk bagian sisa dari array hingga semua elemen terurut.</p>
                    <p><em>Inti: Pilih elemen terkecil, pindahkan ke depan, ulangi untuk sisa data.</em></p>
                    <br>
                    <p><strong>3. Insertion Sort</strong></p>
                    <p>Insertion Sort bekerja seperti menyusun kartu di tangan. Elemen pertama dianggap sudah terurut. Setiap elemen berikutnya diambil, lalu dimasukkan ke posisi yang tepat di antara elemen-elemen yang sudah terurut sebelumnya dengan cara menggeser elemen yang lebih besar ke kanan.</p>
                    <p><em>Inti: Ambil satu per satu elemen dan sisipkan ke posisi yang tepat dalam bagian yang sudah terurut.</em></p>
                </div>
            </div>
        </section>
    </main>

    <script src="../route/global.js" type="module"></script>
    <script src="../route/canvasroute.js" type="module"></script>
</body>
</html>